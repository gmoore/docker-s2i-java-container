#!/bin/bash

set -e

APP_TARGET=${APP_TARGET:-target}
APP_JAR_REGEX=${$APP_JAR_REGEX:-.*\(jar\|war\)}
echo "---> Starting Spring Boot application"
echo "--> # APP_TARGET = $APP_TARGET"
echo "--> # JAVA_OPTS = $JAVA_OPTS"
echo "---> Running application from standalone jar/war..."

if [! -d "$APP_TARGET"  ]
then
   echo APP_TARGET directory isn`t existent.
   exit 1
fi
EXECUTABLE=`find $APP_TARGET -maxdepth 1 -regex "$APP_JAR_REGEX"`
if [! -r "$EXECUTABLE"  ]
then
   echo Executeable Java application not found.
   exit 1
fi
java $JAVA_OPTS -jar $EXECUTABLE
